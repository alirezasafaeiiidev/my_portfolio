# TLS Fix Log - 2026-02-17

## Scope
Fix HTTPS/TLS mismatch for `alirezasafeidev.ir` on production VPS (`185.3.124.93`).

## Actions Executed on Server
1. Verified server access and existing nginx/certbot state.
2. Detected root cause:
   - `/etc/nginx/sites-available/my-portfolio.conf` was serving:
     - `/etc/letsencrypt/live/persiantoolbox-unified/fullchain.pem`
     - `/etc/letsencrypt/live/persiantoolbox-unified/privkey.pem`
   - No certificate existed for `alirezasafeidev.ir`.
3. Issued certificate:
   - `certbot certonly --webroot -w /var/www/letsencrypt -d alirezasafeidev.ir -d www.alirezasafeidev.ir --cert-name alirezasafeidev.ir --non-interactive --agree-tos --keep-until-expiring`
4. Updated nginx portfolio vhost to use:
   - `/etc/letsencrypt/live/alirezasafeidev.ir/fullchain.pem`
   - `/etc/letsencrypt/live/alirezasafeidev.ir/privkey.pem`
5. Validated and reloaded nginx:
   - `nginx -t`
   - `systemctl reload nginx`
6. Verified renewal automation:
   - `certbot renew --dry-run` (success for all certs, including `alirezasafeidev.ir`).

## Verification
- TLS certificate SNI check:
  - `CN=alirezasafeidev.ir`
  - SAN includes `alirezasafeidev.ir` and `www.alirezasafeidev.ir`
- HTTP redirect:
  - `http://alirezasafeidev.ir` -> `301` to HTTPS
- HTTPS response:
  - `https://alirezasafeidev.ir` -> `200`
  - `Strict-Transport-Security` present

## Result
TLS/HTTPS issue for `alirezasafeidev.ir` is resolved as of 2026-02-17.
