# ID: P0-05
## Title
Worker runtime for heavy tools (PDF/Image) with abort/progress and memory guards

## Context
- Local-first file tooling must avoid blocking the main thread and must handle large files safely.
- Reference implementation exists in:
  - `_ops/external/asdev-persiantoolbox/features/pdf-tools/workerClient.ts`
  - `_ops/external/asdev-persiantoolbox/features/pdf-tools/workers/pdf-worker.ts`
  - `_ops/external/asdev-persiantoolbox/features/image-tools/workers/image-tools.worker.ts`

## Steps
1. Add a shared worker client abstraction in `src/lib/workers/*`:
   - request/response ids
   - progress events
   - abort support (terminate + reject)
2. Define hard limits per tool type (size/page count) and user-facing errors in fa-IR.
3. Add a “safe download” helper that revokes blob URLs and avoids leaking memory.
4. Provide a “job queue” baseline API (single-job is enough for MVP; batch can be P2).

## Acceptance criteria
- Heavy processing runs in a Web Worker and UI stays responsive.
- Progress bar updates during long operations.
- Aborting a job stops work and frees resources (worker terminated).

## Dependencies
- `P0-03`

## Files to modify (best guess)
- Add `src/lib/workers/*`
- Add `src/components/ui/progress.tsx` (already exists) wiring into tool UIs
- Add per-feature worker folders under `src/features/*/workers/*` (new)

